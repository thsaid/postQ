---
Title: "SALES Questions"
author: "Tamer Said"
date: "04/08/2020"
output: html_document
---

#Intro to SALES survey try to complie all the analysis in this file and clear the older ones 

Q7-Q14	SE (8 questions)
Q15-Q22	TV (8 questions)
Q23-Q32	MG (9 questions)
Notes: Questions 26 and 31 are repeated
Questions 24 and 29 are repeated
There is a missing question: It is important to me that I improve my
science skills.


#Loading the latest version of the post questionnaire (18/7): this file does not load!! I am not sure where the original file is!! The only version that I have now is the PostQ_filtered 12_7_2021.. it contains no duplicates and has all the IDs (415 in total)

```{r}
PostQ <- read.csv("postQ_filtered_12_7_2021.csv", header = T, na.strings=c(""," ","NA"))
```


I have to load tidyverse package first
```{r}
library(tidyverse)

```

To select the coloumns I am interested in, I want to select the variables that have the SALES questions only (from Q7 to Q32)

```{r}
SALES <- select(PostQ,ID:Gender, Q07:Q32)
```


```{r}
write.csv(SALES, "SALES_20210718.csv")
```

Scoring of the SALES Questions

```{r}
scoring <- read.csv("scoring.csv")
```

#Work from here on the scoring 

```{r}
SALES_long <- pivot_longer(data = SALES,cols =Q7:Q32,names_to = "Question",values_to = "Response"  )

```
Renaming variables in SALES_long

```{r}
SALES_long %>% 
  rename(ID= Q1, Picture= Q2, Color= Q3, Gender= Q4)
```

Joining the tables together to calculate the scores

```{r}
SALES_joined <- inner_join (x = SALES_long,y= scoring, by = "Response")
```

#Saving the files

```{r}
write.csv(SALES_joined, "SALES_long_scores_20210718.csv")
```

Renaming the columns
 

 
```{r}
SALES_scores <- SALES_joined %>% 
             group_by(Q1) %>% 
             summarise (SS = sum(score))
```

```{r}
SALES_scores <- SALES_scores %>%
  rename(ID = Q1, SALES_Score = SS)
```

```{r}
SALES_scores <- SALES_scores[-1, ] 
```

I would like to check the structure of my variables
```{r}
str(SALES_joined)

```

To check for missing values
```{r}
is.na(SALES_joined)
```
```{r}
summary(SALES_joined)
```
Renaming the variables in SALES Scores

```{r}
SALES_scores <- rename(SALES_scores, ID= Q1)
```

